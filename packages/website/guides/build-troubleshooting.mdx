---
title: Troubleshooting a Broken Build
description: 
---

## Troubleshooting a Broken Build

This guide covers common issues you may encounter when building Cannon packages and how to resolve them.

### Package Not Found

Example Error:

```bash
> cannon run reye
Error: deployment not found: reye:latest@main. please make sure it exists for the network 13370
```

Troubleshooting Tips:
* Ensure that the package name is not misspelled
* Ensure that the `--chain-id` argument is correct (or, if it's not provided, that the package is deployed to the local network)
* Double check if the preset is correct/non-default
* If you are seeing the issue intermittently, you may need to configure a [custom registry provider](#custom-registry)

### IPFS Configuration Issues

Cannon uses [IPFS](https://ipfs.tech/) in order to store deployment artifacts in a decentralized way, but this can sometimes lead to resolution errors.

You may see an error like this, or the command that you are trying to run just times out entirely:

```bash
> cannon inspect ipfs://QmdDu3qvRVyBuCmWygy5g17tE4ZpcZ9AMWaUuUweTUJCNx
Error: could not download cannon package data from "QmdDu3qvRVyBuCmWygy5g17tE4ZpcZ9AMWaUuUweTUJCNx": AxiosError: Request failed with status code 404
```

When this error is seen, it usually means that the printed artifact has not been pinned properly to the IPFS network. By default, Cannon attempts to pin 
your artifact to the IPFS network whenever the `cannon publish` command is used. The Cannon Repo IPFS service will also automatically attempt to pin any published
Cannon packages to ensure the health of the entire network. However, it is sometimes the case that packages manage to get released without their necessary artifacts.

In cases like this, the only solution is to find the missing artifact and ensure it is pinned on IPFS.
Often, you still have the affected IPFS artifact handy on the package deployer's machine. The deployer can force cannon to pin the artifact to your configured IPFS server using this command:

```bash
> cannon pin <ipfs://Qm...>
```

...where `<ipfs://Qm...>` is the IPFS hash to pin from the error above.

If the problem persists, double check your [IPFS configuration](#configure-ipfs).

### Ethereum RPC Connection Issue

Cannon uses Ethereum JSON-RPC to lookup data and complete transacitons. There are a couple different ways that RPC errors can manifest in Cannon.

#### Deployment RPC URL issue

By default, Cannon uses the default public RPC provided by the [Viem chains library](https://viem.sh/docs/chains/introduction). These RPCs are generally designed for low importance, low volume consumption,
and it is highly reccomended to specify your own RPC during a deployment.

You can configure your own RPC on the CLI by using the `--rpc-url` argument. This is supported on any command that may need to connect to an RPC, such as `build`, `inspect`, `run`, or `alter`. For example:

```bash
cannon build --rpc-url http://evm-mainnet
```

On the website, we also provide a settings page where you can set your own Ethereum RPC URLs for any requests from the website.

#### Registry RPC Issue

Cannon may look up package data information from the Cannon Registry deployed on mainnet or optimism network.
By default, Cannon uses publicly-provided RPC that we operate on Alchemy and Infura which is gated to only allow requests for our own contracts. However, if these RPCs are malfunctioning,
it may be necessary to override the default RPC providers.

The default registry configuration can be modified by editing `~/.local/share/cannon/settings.json` file and setting the following field:

```json
{
    "registries": [
        {
            "name": "OP Mainnet",
            "chainId": 10,
            "rpcUrl": ["<https://your optimism RPC URL>"],
            "address": "0x8E5C7EFC9636A6A0408A46BB7F617094B81e5dba"
        },
        {
            "name": "Ethereum Mainnet",
            "chainId": 1,
            "rpcUrl": ["<https://your ethereum RPC URL>"],
            "address": "0x8E5C7EFC9636A6A0408A46BB7F617094B81e5dba"
        }
  ]
}
```

Replace the `rpcUrl` values above with the address of your own RPC provider URLs.

### JS Heap overflow

As builds get larger, more memory may be required to complete a build. By defualt the amount of memory that Cannon can allocate in NodeJS is quite low. To increase it, use an environment variable. For example, to increase the amount of memory available to the build command:

```bash
NODE_OPTIONS="--max-old-space-size=8196" cannon build
```

### Contract Verification Issues

Cannon allows for verification of contracts on Etherscan or other same format API using the `cannon verify` command. Cannon does everything it can to store all the data it needs to complete a veriication within the package data, so usually no additional action is required. However if issues are encountered, make sure:
* the API key you have for `--api-key` is correct
* you are not exceeding the rate limit
* you have provided an API URL (if needed) with `--api-url`